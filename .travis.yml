os:
- linux
- windows

sudo: false

language: go

# Whenever the Go version is updated here, .circleci/config.yml and .promu.yml
# should also be updated.
go:
- 1.11.x

go_import_path: github.com/prometheus/prometheus

script:
- |
  (
    set -Eeuo pipefail
    set -x
    if [ "$TRAVIS_OS_NAME" = 'windows' ]; then
      go test -v ./...
    else
      make check_license style unused test staticcheck
    fi
  )

